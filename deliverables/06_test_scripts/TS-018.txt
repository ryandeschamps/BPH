TEST SCRIPT: TS-018
Test Scenario: Add Product to Shopping Cart
User Story: As a Logged-in Buyer, I want to add products to my shopping cart with selected size and color, so that I can collect items for purchase
Priority: Critical
Related Requirements: FR-007

GIVEN the user is logged in as "emily.johnson@email.com"
  AND the user is on a product detail page for "Classic Cotton Shirt"
  AND the product has the following variations:
    - Sizes: S, M, L, XL
    - Colors: Red, Blue, Green, Black
  AND the product is in stock

WHEN the user selects size "M" from the size dropdown
  AND the user selects color "Red" from the color options
  AND the user sets quantity to "2"
  AND the user clicks "Add to Cart" button

THEN the system should validate the user is authenticated
  AND validate the selected size and color are available
  AND validate the product is in stock
  AND add the product to the user's shopping cart with:
    - Product ID
    - Product Name: "Classic Cotton Shirt"
    - Size: "M"
    - Color: "Red"
    - Quantity: 2
    - Unit Price: $29.99
    - Subtotal: $59.98
  AND display a confirmation message: "Product added to cart successfully"
  AND update the cart icon counter in the header
  AND provide options to:
    - "Continue Shopping"
    - "View Cart"
    - "Proceed to Checkout"

WHEN the user attempts to add a product without logging in

THEN the system should redirect to the login page
  AND display a message: "Please log in to add items to cart"
  AND after successful login, redirect back to the product page

WHEN the user attempts to add a product without selecting required variations

THEN the system should display validation messages:
  - "Please select a size"
  - "Please select a color"
  AND not add the product to cart

EXPECTED RESULT:
- Product is successfully added to cart with correct details
- Cart counter is updated
- User receives confirmation feedback
- Authentication is enforced
- Variation selection is validated
- Cart persists across sessions
