Test Script: TS-027 - Enter Shipping Address at Checkout

Test Scenario: As a registered buyer, I want to provide my shipping address during checkout, so that I can receive my order at the correct location.

Prerequisites:
- User is logged in
- User has items in shopping cart
- User has entered billing address (or is on shipping address step)
- Address form is functional

Test Data:
- First Name: Jane
- Last Name: Smith
- Address Line 1: 456 Oak Avenue
- Address Line 2: Suite 200
- City: San Francisco
- State: California
- ZIP Code: 94102
- Country: United States
- Phone: +1-555-0202

Test Steps:

GIVEN the user is on the checkout page shipping address section
WHEN the page loads
THEN a "Shipping Address" section should be displayed

GIVEN the user views the shipping address section
WHEN the section is displayed
THEN the following fields should be available:
  - First Name (text input)
  - Last Name (text input)
  - Address Line 1 (text input)
  - Address Line 2 (text input, optional)
  - City (text input)
  - State (dropdown or text input)
  - ZIP Code (text input)
  - Country (dropdown, pre-filled with "United States")
  - Phone Number (text input)

GIVEN the user entered a billing address
WHEN the shipping address section loads
THEN an option "Same as billing address" checkbox may be available
AND if checked, the shipping address fields should auto-populate with billing address

GIVEN the user wants to ship to a different address
WHEN the user unchecks "Same as billing address" or enters new information
THEN the user should be able to enter a different shipping address

GIVEN the user has saved addresses
WHEN the shipping address section loads
THEN the user may see an option to "Select from saved addresses"
AND the user should be able to choose a saved address

GIVEN the user wants to enter a new shipping address
WHEN the user fills in the shipping address form:
  - First Name: "Jane"
  - Last Name: "Smith"
  - Address Line 1: "456 Oak Avenue"
  - Address Line 2: "Suite 200"
  - City: "San Francisco"
  - State: "California"
  - ZIP Code: "94102"
  - Phone: "+1-555-0202"
THEN all fields should accept the input

GIVEN the user has entered the shipping address
WHEN the user clicks "Continue" or "Save and Continue"
THEN the system should validate all required fields
AND validate the ZIP code format
AND verify the address is within the United States

GIVEN the shipping address validation passes
WHEN the form is submitted
THEN the shipping address should be saved for this order
AND the system should check shipping availability to the ZIP code
AND the user should proceed to the order review or payment section

GIVEN the user enters a non-US address
WHEN the user selects a country other than "United States"
AND tries to continue
THEN the system should display an error message
AND the message should indicate "We only ship within the United States"

GIVEN the user enters invalid ZIP code
WHEN the user enters an invalid ZIP code format
THEN the system should display a validation error
AND the message should indicate "Please enter a valid US ZIP code"

GIVEN the user wants to save the address for future use
WHEN an option "Save this address to my account" is available
THEN the user should be able to check this option
AND the address should be saved to the user's address book

Expected Result:
- Shipping address form is displayed at checkout
- All required address fields are present
- User can use billing address as shipping address
- User can enter different shipping address
- User can select from saved addresses
- Form validation works correctly
- ZIP code and country validation enforced
- Only US addresses are accepted
- Address is saved for the order
- Option to save address to account
- User proceeds to next checkout step

Validation Points:
- Shipping address section is visible
- All required fields are present
- "Same as billing address" option works
- Saved addresses can be selected
- New address can be entered
- Form accepts valid input
- Required field validation works
- ZIP code format validation works
- Country restriction to US is enforced
- Non-US addresses are rejected
- State selection works correctly
- Phone number field accepts valid format
- Shipping availability is checked for ZIP code
- Address is saved to order record
- Save to address book option works
- User can proceed after entering valid US address
